# 🚀 اختبار نظام التتبع المباشر - Live Tracking Test Guide

## خطوات الاختبار السريع

### 1. 🏃‍♂️ تشغيل الخادم
```bash
cd /home/belal/Documents/ASeel/Project
npm run dev
```

### 2. 👨‍💼 اختبار الأدمن
1. سجل دخول كأدمن
2. اذهب إلى: `http://localhost:3000/ar/admin/live-tracking`
3. تحقق من:
   - ✅ عرض الإحصائيات (رحلات نشطة، سائقين متصلين)
   - ✅ قائمة الرحلات النشطة
   - ✅ الخريطة مع نقاط البداية والنهاية
   - ✅ أزرار التحكم في التتبع

### 3. 🚛 اختبار السائق
1. سجل دخول كسائق
2. اقبل رحلة من صفحة الرحلات
3. اذهب إلى: `http://localhost:3000/ar/driver/live-tracking`
4. تحقق من:
   - ✅ عرض معلومات الرحلة
   - ✅ بدء التتبع التلقائي
   - ✅ الخريطة مع نقاط البداية والنهاية
   - ✅ مسار التتبع الأحمر
   - ✅ إحصائيات التتبع

### 4. 🔄 اختبار التدفق الكامل
1. **السائق**: اقبل رحلة → ابدأ التتبع
2. **الأدمن**: راقب السائق على الخريطة
3. **السائق**: حرك الموقع (أو انتظر التحديثات التلقائية)
4. **الأدمن**: شاهد التحديثات المباشرة
5. **السائق**: اكمل الرحلة

## الميزات المتوقعة

### 🗺️ على الخريطة:
- 🟢 **نقطة خضراء**: البداية
- 🔴 **نقطة حمراء**: الوجهة  
- 🔵 **نقطة زرقاء متحركة**: موقع السائق الحالي
- 📏 **خط منقط بنفسجي**: خط المسار المباشر
- 🛤️ **خط أحمر**: مسار التتبع الفعلي

### 📊 الإحصائيات:
- عدد النقاط المُرسلة
- حالة الاتصال (متصل/غير متصل)
- آخر وقت تحديث
- السرعة الحالية

### 🎛️ أدوات التحكم:
- بدء/إيقاف التتبع
- توسيط الخريطة
- عرض المسار الكامل
- تكبير/تصغير الخريطة

## استكشاف الأخطاء

### ❌ إذا لم تظهر الخريطة:
1. تحقق من console للأخطاء
2. تأكد من تحميل Leaflet
3. تحقق من الاتصال بالإنترنت

### ❌ إذا لم يعمل التتبع:
1. تحقق من إذن الموقع في المتصفح
2. تأكد من وجود رحلة نشطة
3. راجع Network tab للطلبات

### ❌ إذا لم تظهر النقاط:
1. تحقق من إحداثيات المدن
2. تأكد من وجود بيانات الرحلة
3. راجع console للأخطاء

## URLs للاختبار السريع

### الأدمن:
- التتبع المباشر: `http://localhost:3000/ar/admin/live-tracking`
- تتبع الرحلات: `http://localhost:3000/ar/admin/tracking`
- إدارة الرحلات: `http://localhost:3000/ar/admin/trips`

### السائق:
- التتبع المباشر: `http://localhost:3000/ar/driver/live-tracking`
- تتبع الرحلة: `http://localhost:3000/ar/driver/tracking`
- الرحلات: `http://localhost:3000/ar/driver/trips`

## بيانات اختبار

### مدن مدعومة:
- الرياض، جدة، الدمام
- مكة المكرمة، المدينة المنورة
- الطائف، تبوك، بريدة
- وغيرها...

### حالات الاختبار:
1. **رحلة قصيرة**: الرياض → جدة
2. **رحلة طويلة**: الرياض → تبوك  
3. **رحلة محلية**: الرياض → الخبر

---

## ملاحظات مهمة

⚠️ **تأكد من**:
- تشغيل قاعدة البيانات
- وجود بيانات مستخدمين (أدمن + سائق)
- وجود رحلات نشطة للاختبار

🎯 **النتيجة المتوقعة**:
نظام تتبع مباشر كامل يعرض مواقع السائقين في الوقت الفعلي مع خرائط تفاعلية وأدوات تحكم شاملة.
