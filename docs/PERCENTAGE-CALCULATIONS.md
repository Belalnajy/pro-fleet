# ูุธุงู ุญุณุงุจ ุงูุนูููุฉ ุจุงููุณุจุฉ ุงููุฆููุฉ - Percentage-Based Commission System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุชูุฏู ูุญุณุงุจ ุฑุณูู ุงูุชุฎููุต ุงูุฌูุฑูู ูุฏุนู ููุงู ูู:
- **ุงููุจุงูุบ ุงูุซุงุจุชุฉ** (Fixed Amounts)
- **ุงููุณุจ ุงููุฆููุฉ** (Percentage-Based)

ูุฐุง ุงููุธุงู ูููุฑ ูุฑููุฉ ุฃูุจุฑ ูููุฎูุตูู ุงูุฌูุฑูููู ูู ุชุญุฏูุฏ ุฑุณูููู ุจูุงุกู ุนูู ูููุฉ ุงููุงุชูุฑุฉ.

## ๐ฏ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุฃููุงุน ุงูุฑุณูู ุงููุฏุนููุฉ:**
- **ุฑุณูู ุซุงุจุชุฉ**: ูุจูุบ ูุญุฏุฏ ุจุงูุฑูุงู ุงูุณุนูุฏู
- **ุฑุณูู ุจุงููุณุจุฉ ุงููุฆููุฉ**: ูุณุจุฉ ูู ุฅุฌูุงูู ูููุฉ ุงููุงุชูุฑุฉ

### 2. **ุญููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ:**
```sql
-- ูู ุฌุฏูู customs_clearances
customsFeeType          VARCHAR DEFAULT 'FIXED'
customsFeePercentage    FLOAT   DEFAULT 0
additionalFeesType      VARCHAR DEFAULT 'FIXED' 
additionalFeesPercentage FLOAT  DEFAULT 0
```

### 3. **ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุญุณูุฉ:**
- ุงุฎุชูุงุฑ ููุน ุงูุฑุณูู (ุซุงุจุช ุฃู ูุณุจุฉ ูุฆููุฉ)
- ูุนุงููุฉ ููุฑูุฉ ูููุจูุบ ุงููุญุณูุจ
- ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช (ุนุฑุจูุ ุฅูุฌููุฒูุ ุฃุฑุฏู)

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุฎูุต ุงูุฌูุฑูู:

1. **ุงุฎุชูุงุฑ ููุน ุงูุฑุณูู ุงูุฌูุฑููุฉ:**
   - **ูุจูุบ ุซุงุจุช**: ุฃุฏุฎู ุงููุจูุบ ุจุงูุฑูุงู
   - **ูุณุจุฉ ูุฆููุฉ**: ุฃุฏุฎู ุงููุณุจุฉ (ูุซุงู: 5%)

2. **ุงุฎุชูุงุฑ ููุน ุงูุฑุณูู ุงูุฅุถุงููุฉ:**
   - **ูุจูุบ ุซุงุจุช**: ุฃุฏุฎู ุงููุจูุบ ุจุงูุฑูุงู
   - **ูุณุจุฉ ูุฆููุฉ**: ุฃุฏุฎู ุงููุณุจุฉ (ูุซุงู: 2.5%)

3. **ูุนุงููุฉ ุงููุจูุบ:**
   - ูุชู ุนุฑุถ ุงููุจูุบ ุงููุญุณูุจ ุชููุงุฆูุงู
   - ูุนุชูุฏ ุงูุญุณุงุจ ุนูู ุฅุฌูุงูู ูููุฉ ุงููุงุชูุฑุฉ ุงููุฎุชุงุฑุฉ

## ๐ ุฃูุซูุฉ ุงูุญุณุงุจุงุช

### ูุซุงู 1: ูุงุชูุฑุฉ ุจูููุฉ 2000 ุฑูุงู

**ุงูุณููุงุฑูู ุงูุฃูู - ุฑุณูู ุซุงุจุชุฉ:**
- ุฑุณูู ุฌูุฑููุฉ: 500 ุฑูุงู (ุซุงุจุช)
- ุฑุณูู ุฅุถุงููุฉ: 200 ุฑูุงู (ุซุงุจุช)
- **ุงููุฌููุน**: 700 ุฑูุงู

**ุงูุณููุงุฑูู ุงูุซุงูู - ุฑุณูู ุจุงููุณุจุฉ:**
- ุฑุณูู ุฌูุฑููุฉ: 5% = 100 ุฑูุงู
- ุฑุณูู ุฅุถุงููุฉ: 2% = 40 ุฑูุงู
- **ุงููุฌููุน**: 140 ุฑูุงู

**ุงูุณููุงุฑูู ุงูุซุงูุซ - ูุฎุชูุท:**
- ุฑุณูู ุฌูุฑููุฉ: 300 ุฑูุงู (ุซุงุจุช)
- ุฑุณูู ุฅุถุงููุฉ: 1.5% = 30 ุฑูุงู
- **ุงููุฌููุน**: 330 ุฑูุงู

## ๐๏ธ ุงูุชุทุจูู ุงูุชููู

### 1. **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```bash
npx prisma migrate dev --name add-percentage-calculations
npx prisma generate
```

### 2. **API ุงููุญุฏุซ:**
```javascript
// ูู /api/customs-broker/clearances
const actualCustomsFee = customsFeeType === 'PERCENTAGE' 
  ? (invoice.total * customsFeePercentage) / 100
  : customsFee || 0
```

### 3. **ุงููุงุฌูุฉ ุงููุญุฏุซุฉ:**
- ุงุฎุชูุงุฑ ููุน ุงูุฑุณูู
- ุญููู ุฅุฏุฎุงู ูููุตูุฉ ูููุจุงูุบ ูุงููุณุจ
- ูุนุงููุฉ ููุฑูุฉ ููุญุณุงุจุงุช

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุชุดุบูู ุงุฎุชุจุงุฑุงุช ุงูุญุณุงุจุงุช:
```bash
npm run test:percentage-calculations
```

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ:
1. **ุฑุณูู ุซุงุจุชุฉ ููุท**
2. **ุฑุณูู ุฌูุฑููุฉ ุจุงููุณุจุฉ + ุฑุณูู ุฅุถุงููุฉ ุซุงุจุชุฉ**
3. **ุฑุณูู ุฌูุฑููุฉ ุซุงุจุชุฉ + ุฑุณูู ุฅุถุงููุฉ ุจุงููุณุจุฉ**
4. **ููุง ุงูููุนูู ุจุงููุณุจุฉ ุงููุฆููุฉ**

## ๐ ุงูููุงุฆุฏ

### ูููุฎูุตูู ุงูุฌูุฑูููู:
- **ูุฑููุฉ ูู ุงูุชุณุนูุฑ**: ุงุฎุชูุงุฑ ุงูุทุฑููุฉ ุงูุฃูุณุจ ููู ุญุงูุฉ
- **ุนุฏุงูุฉ ูู ุงูุฑุณูู**: ุฑุจุท ุงูุฑุณูู ุจูููุฉ ุงูุดุญูุฉ
- **ุณูููุฉ ุงูุญุณุงุจ**: ูุนุงููุฉ ููุฑูุฉ ูููุจุงูุบ

### ููุนููุงุก:
- **ุดูุงููุฉ ุฃูุจุฑ**: ููู ุทุฑููุฉ ุญุณุงุจ ุงูุฑุณูู
- **ุนุฏุงูุฉ ูู ุงูุชูููุฉ**: ุฑุณูู ูุชูุงุณุจุฉ ูุน ูููุฉ ุงูุดุญูุฉ

### ูููุธุงู:
- **ูุฑููุฉ ุชูููุฉ**: ุฏุนู ุฃููุงุน ูุชุนุฏุฏุฉ ูู ุงูุญุณุงุจุงุช
- **ูุงุจููุฉ ุงูุชูุณุน**: ุฅููุงููุฉ ุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ ูู ุงูุฑุณูู

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ููุชุฑุญุงุช ููุชุทููุฑ:
1. **ุฑุณูู ูุชุฏุฑุฌุฉ**: ูุณุจ ูุฎุชููุฉ ุญุณุจ ูููุฉ ุงููุงุชูุฑุฉ
2. **ุฑุณูู ุญุณุจ ููุน ุงูุจุถุงุนุฉ**: ูุณุจ ูุฎุชููุฉ ูุฃููุงุน ูุฎุชููุฉ
3. **ุฎุตููุงุช ุชููุงุฆูุฉ**: ููุนููุงุก ุงููููุฒูู
4. **ุชูุงุฑูุฑ ุชุญููููุฉ**: ููุงุฑูุฉ ุงูุฑุณูู ุงูุซุงุจุชุฉ ูุงููุณุจูุฉ

## ๐ ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงูู ุชูููุฉุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 2025-01-23  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงููุทูุฑ**: ูุฑูู Pro Fleet
